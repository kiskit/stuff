@(listSize: Integer, admin: User)
<html>
    <head>
        <title>Login</title>
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.css")">        
        <script type="text/javascript" src='@routes.Assets.at("javascripts/jquery.js")'></script>
        
        <script>
        	var maxPagerSize = 8;
        	var pageSize = 2;
        	var currentPage = 1;
        	var lastPage = Math.ceil(@listSize / pageSize); 
        	function buildPager() {
        		console.log("building pager with " + lastPage + " pages");
        		var pager = document.getElementById("pager");
        		// Left <<
        		var newliLeft = document.createElement('li');
        		var newaLeft = document.createElement('a');
        		//newaLeft.setAttribute('href','/videolist?pageNumber=' + (currentPage > 1?currentPage - 1:1) + '&pageSize='+pageSize);
        		newaLeft.setAttribute('onclick','pagerOnClickLeft()');
        		if (currentPage == 1) {newliLeft.setAttribute('class', 'disabled');}
        		newaLeft.innerHTML="&laquo;";
        		pager.appendChild(newliLeft);
        		newliLeft.appendChild(newaLeft);
        		// Pages numbers
        		for (var i = 1; (i <= maxPagerSize) && (i <= lastPage); i++) {
        			var newli = document.createElement('li');
        			var newa = document.createElement('a');
        			//newa.setAttribute('href','/videolist?pageNumber=' + i + '&pageSize='+pageSize);
        			newa.setAttribute('onclick','pagerOnClickPage(' + i + ')');
        			newa.innerHTML=i;
        			newli.appendChild(newa);
        			pager.appendChild(newli);
				}
				// Right >>
				var newliRight = document.createElement('li');
				if (currentPage == 1) {newliRight.setAttribute('class', 'disabled');}
        		var newaRight = document.createElement('a');
        		//newaRight.setAttribute('href','/videolist?pageNumber=' + (currentPage < lastPage?currentPage + 1:lastPage) + '&pageSize='+pageSize);
        		newaLeft.setAttribute('onclick','pagerOnClickRight()');
        		newaRight.innerHTML="&raquo;";
        		pager.appendChild(newliRight);
        		newliRight.appendChild(newaRight);
        	}
        	
        	function pagerOnClickLeft() {
        		console.log("clicked on left");
        		currentPage = (currentPage == 1?1:currentPage - 1);
        		pagerOnClickPage(currentPage);
        	}
        	function pagerOnClickRight() {
        		console.log("clicked on right");
        		currentPage = (currentPage == lastPage?lastPage:currentPage + 1);
        		pagerOnClickPage(currentPage);
        	}
        	function pagerOnClickPage(pageNumber) {
        		currentPage = pageNumber;
        		deleteTable();
        		populateTable();
        	}
        	function deleteTable() {
        		console.log("Deleting table");
        		var l = document.getElementById("listTable").rows.length; 
        		console.log("Table length: " + l);
				for (var i = 1, row; i < l; i++) {
					console.log("Deleting table row " + i);
				 	document.getElementById("listTable").deleteRow(1);
				}
        	}
        	function populateTable() {
        		console.log("Populating table");
        		newDataRequest = $.ajax({url: "/videolist?pageNumber="+currentPage+"&pageSize=" + pageSize});						
				newDataRequest.done(function(data){
					var tableBody = document.getElementById("listTableBody"); 
					for (var i = 0; i < data.length; i++) {
						console.log("Populating table loop " + i);
						var tr = document.createElement('tr');
						var td;
						td = document.createElement('td');
						td.innerHTML=data[i]['id'];
						tr.appendChild(td);
						td = document.createElement('td');
						td.innerHTML=data[i]['inputTitle'];
						tr.appendChild(td);
						td = document.createElement('td');
						var d = new Date(data[i]['creationDate']);
						//td.innerHTML=d.getUTCDate() + '/' + (d.getMonth() + 1) + '/' + d.getFullYear();
						td.innerHTML=d.toLocaleDateString();
						tr.appendChild(td);
						td = document.createElement('td');
						if (data[i]['supportType'] === "DVD") {
							td.innerHTML='DVD';
						} else {
							td.innerHTML='Blu-Ray';
						}
						tr.appendChild(td);
						td = document.createElement('td');
						if (data[i]['contentType'] === "MOVIE") {
							td.innerHTML='Film';
						} else {
							td.innerHTML='Série';
						}
						tr.appendChild(td);
						// Availability
						td = document.createElement('td');
						if (data[i]['rentedTo'] == null) {
							td.innerHTML='Disponible';
						} else {
							td.innerHTML='Sorti';
						}
						tr.appendChild(td);
						// Edit button
						td = document.createElement('td');
						var button = document.createElement('a');
						button.setAttribute('class', 'btn btn-primary btn-sm');
						button.setAttribute('href', '/videoedit/' + data[i]['id']);
						button.innerHTML="Edit";
						td.appendChild(button);
						tr.appendChild(td);
						
						//[{"id":14,"supportType":"DVD","contentType":"MOVIE","movieId":"10191","inputTitle":"Dragons","creationDate":1401867399497,"updateDate":1401867399497,"rentalDate":null,"rentedTo":null,"state":"OK"},
						tableBody.appendChild(tr);
					}			
					
				});		
        	}
        	function onLoad() {
        		buildPager();
        		populateTable();
        	}
        	; 
        </script>
        
        
    </head>
	<body onload="onLoad()">
        <header>
            <!-- If user connected, then display the admin header-->
            <!-- display filters: most recent, available only-->
        </header>
    <div id="mainContainer" class="container">
	<div>
	<table id="listTable" class="table table-striped table-bordered">
	<tbody id="listTableBody">	
		<tr>
			<th>ID</th>
			<th>Titre</th>
			<th>Date d'ajout</th>
			<th>Support</th>
			<th>TV/Film</th>
			<th>Disponibilité</th>
        </tr>
    </tbody>
	</table>
	</div>
	<div>
	<ul id="pager" class="pagination">
	</ul>
	</div>
	
	<form action="videoedit/0" method="get" style="margin: 0px; padding: 0px;">
		<button class="btn btn-primary" type="submit">Ajouter une vidéo</button>
		<button type="button" class="btn btn-danger" name="action" value="Cancel" onclick="window.location.href = '/admin';">Retour</button>
	</form>
    </div> <!-- /container -->
    </body>
</html> 